---
date: 2025-03-26 01:24:59
title: vitepress-plugin-linkä½¿ç”¨
permalink: /pages/53ad43
tags: 
  - æ’ä»¶
author: 
  name: åæ€»
  link: https://xiaoying.org.cn
categories: 
  - å·¥å…·ç±»
  - æ’ä»¶
---




# vitepress-plugin-link

## githubåœ°å€

::: navCard  2
```yaml
- name: vitepress-plugin-link
  desc: è¿™æ˜¯ä¸€ä¸ªé€‚ç”¨äº vitepressçš„ Vite æ’ä»¶ï¼Œåœ¨vitepresså¯åŠ¨åè¯»å– markdown æ–‡æ¡£ frontmatterçš„ permalinkã€‚
  img: https://img.xiaoying.org.cn/img/202503231752583.png
  link: https://github.com/liyao52033/vitepress-plugin-link
  badge: vitepressæ’ä»¶
  badgeType: tip
```
:::

## âœ¨ ç‰¹æ€§

- ğŸš€ğŸš€ æ”¯æŒç»™ markdown æ–‡æ¡£è®¾ç½®å”¯ä¸€çš„è®¿é—® **æ°¸ä¹…é“¾æ¥**ï¼Œä¸å†å› ä¸º markdown æ–‡æ¡£è·¯å¾„ç§»åŠ¨è€Œå¯¼è‡´è®¿é—®åœ°å€å‘ç”Ÿå˜åŒ–
- ğŸš€ è¯»å– markdown æ–‡æ¡£ `frontmatter` çš„ `permalink`ï¼ŒæŒ‚è½½åˆ° `themeConfig.permalinks`
- ğŸš€ æä¾› `usePermalink` hooks å‡½æ•°æ‹“å±• `router` æ–¹æ³•ï¼Œæ”¯æŒ `router.push(href)` è·³è½¬åˆ°æ°¸ä¹…é“¾æ¥æˆ–å®é™…çš„æ–‡ä»¶è·¯å¾„
- ğŸš€ æ”¯æŒ locales å›½é™…åŒ–ï¼Œè‡ªåŠ¨ç»™ **æ°¸ä¹…é“¾æ¥** æ·»åŠ è¯­è¨€å‰ç¼€ï¼Œä¸åŒè¯­è¨€çš„æ°¸ä¹…é“¾æ¥ä¸ä¼šé‡å¤
- ğŸš€ æ”¯æŒ rewrite è·¯ç”±é‡å†™ï¼Œæœ€ç»ˆå¾—åˆ°çš„æ–‡æ¡£è·¯å¾„æ˜¯ rewrite è·¯ç”±é‡å†™åçš„è·¯å¾„
- ğŸš€ **æ°¸ä¹…é“¾æ¥** æ”¯æŒå¯¼èˆªæ æ¿€æ´»é«˜äº®

## å®‰è£…

å®‰è£… `vitepress-plugin-link` æ’ä»¶

::: code-group

```sh [npm]
npm install vitepress-plugin-link -D
```

```sh [yarn]
yarn add vitepress-plugin-plink -D
```

```sh [pnpm]
pnpm i vitepress-plugin-link -D
```

:::


1ã€æ·»åŠ  `vitepress-plugin-link` æ’ä»¶åˆ° `.vitepress/config.ts`

```typescript
import Permalink from "vitepress-plugin-link";

export default defineConfig({
  vite: {
    plugins: [Permalink({
      path: "docs",
    })],
  },
});
```

2ã€åœ¨`theme/layout/MyLayout.vue`å¼€å¯ç›‘å¬, æ’ä»¶ä½¿ç”¨äº†onBeforeMountç­‰æ–¹æ³•ï¼Œå¿…é¡»åœ¨setUpä¸­æ‰§è¡Œã€‚
```vue 
<script setup lang="ts">
import DefaultTheme from 'vitepress/theme'
const { Layout } = DefaultTheme
import NotFound from "../components/NotFound.vue"; // è‡ªå®šä¹‰çš„404ç»„ä»¶

import usePermalink from "vitepress-plugin-link/usePermalink";
usePermalink().startWatch();


 /**
   * vitepress-plugin-link æ’ä»¶åœ¨ onBeforeMount é‡Œæ ¹æ®è‡ªå®šä¹‰ URL å¯»æ‰¾å¯¹åº”çš„æ–‡æ¡£è¿›è¡ŒåŠ è½½ï¼Œä½†æ˜¯ Vitepress åˆå§‹åŒ–é¡µé¢åœ¨ ``onBeforeMountä¹‹å‰æ‰§è¡Œï¼Œå› æ­¤éœ€è¦å»¶è¿Ÿæ—¶é—´æ¥ç­‰å¾…vitepress-plugin-link` æ’ä»¶æ‰§è¡Œå®Œæˆï¼Œäºæ˜¯éœ€è¦404 é¡µé¢å»¶è¿ŸåŠ è½½æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’
   */
onMounted(() => {
  setTimeout(() => {
    isShow.value = true
  }, 200) // å¯è°ƒæ•´å»¶è¿Ÿæ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰
})
</script>

<template>
  <Layout>
    // æ’å…¥ä½ çš„æ’æ§½...
   <template #not-found>
      <ClientOnly>
          <NotFound  v-if="isShow"/>
      </ClientOnly>
  </template>
  </Layout>
</template>
```

3ã€`.vitepress/theme/index.ts`å¼•ç”¨æ–°çš„å¸ƒå±€

```typescript
import DefaultTheme from 'vitepress/theme'
import MyLayout from './MyLayout.vue'

export default {
  extends: DefaultTheme,
  // ä½¿ç”¨æ³¨å…¥æ’æ§½çš„åŒ…è£…ç»„ä»¶è¦†ç›– Layout
  Layout: MyLayout
}

```

> è¯´æ˜ï¼šè¯¥æ’ä»¶ä»…é™é¡¹ç›®å¯åŠ¨æ—¶ç”Ÿæ•ˆï¼Œå·²æ”¹åŠ¨æˆ–æ–°æ·»åŠ çš„ markdown éœ€è¦é‡å¯é¡¹ç›®æ‰èƒ½ç”Ÿæ•ˆã€‚

æ’ä»¶é»˜è®¤å¿½ç•¥ `["node_modules", "dist", ".vitepress", "public"]` ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œä¸”åªæ‰«æ markdown æ–‡æ¡£ã€‚

## ğŸ› ï¸ Options

| name       | description                           | type       | default                        |
| ---------- | ------------------------------------- | ---------- | ------------------------------ |
| ignoreList | å¿½ç•¥çš„æ–‡ä»¶/æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ | `string[]` | `[]`                           |
| path       | æŒ‡å®šæ‰«æçš„æ ¹ç›®å½•                      | `string`   | `vitepress` çš„ `srcDir` é…ç½®é¡¹ |

## â— Warning

æ’ä»¶çš„ `usePermalink` å‡½æ•°ä½¿ç”¨äº† `router.onAfterRouteChange` æ–¹æ³•ï¼Œå¦‚æœä½ ä¹Ÿéœ€è¦ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œè¯·æŒ‰ç…§ä¸‹é¢æ ¼å¼è¿›è¡Œæ‹“å±•ï¼š

```typescript
import { useRouter } from "vitepress";

const router = useRouter();

const initRoute = () => {
  const selfOnAfterRouteChange = router.onAfterRouteChange;
  // è·¯ç”±åˆ‡æ¢åçš„å›è°ƒ
  router.onAfterRouteChange = (href: string) => {
    // è°ƒç”¨å¯èƒ½å·²æœ‰çš„å‡½æ•°
    selfOnAfterRouteChange?.(href);

    // è°ƒç”¨è‡ªå·±çš„å‡½æ•°
    myFunction();
  };
};

const myFunction = () => {
  /* */
};
```

å‡è®¾é¡¹ç›®çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```text
.
â”œâ”€ docs                # é¡¹ç›®æ ¹ç›®å½•
â”‚  â”œâ”€ guide
â”‚  â”‚  â””â”€ api.md
```

`api.md` å†…å®¹å¦‚ä¸‹ï¼š

```yaml
---
permalink: /guide-api
---
```

- è®¿é—® `/guide/api.html` å¯ä»¥è¿›å…¥æ–‡æ¡£é¡µé¢ï¼Œè¿™æ˜¯ vitepress çš„è‡ªå¸¦åŠŸèƒ½ã€‚**å¦‚æœæ–‡ä»¶è·¯å¾„å‘ç”Ÿæ”¹å˜ï¼Œè®¿é—®é“¾æ¥ä¹Ÿéšç€æ”¹å˜**
- è®¿é—® `/guide-api` å¯ä»¥è¿›å…¥æ–‡æ¡£é¡µé¢ï¼Œè¿™æ˜¯æ’ä»¶çš„å®ç°åŠŸèƒ½ã€‚**ä¸ä¼šéšç€æ–‡ä»¶è·¯å¾„å˜åŒ–è€Œæ”¹å˜**

æ°¸ä¹…é“¾æ¥æ˜¯å”¯ä¸€çš„ï¼Œå¦‚æœå‡ºç°ä¸¤ä¸ªä¸€æ ·çš„æ°¸ä¹…é“¾æ¥ï¼Œåˆ™åé¢çš„æ°¸ä¹…é“¾æ¥è¦†ç›–å‰é¢çš„ï¼Œä½†ä¸å½±å“ vitepress è‡ªå¸¦è®¿é—®è·¯å¾„ã€‚

å¦‚æœæ°¸ä¹…é“¾æ¥ä¸ç”Ÿæ•ˆï¼Œä»£è¡¨ `usePermalink().startWatch()` å¹¶æ²¡æœ‰è¢«æ‰§è¡Œï¼Œè¯·åœ¨æ³¨å†Œ vitepress æˆ–è€…ä»»æ„ä¸»é¢˜å‰åŠ è½½è¯¥å‡½æ•°ï¼Œå¦‚ä½•æ³¨å†Œè¯·çœ‹ ([æ‰©å±•é»˜è®¤ä¸»é¢˜ | VitePress](https://vitepress.dev/zh/guide/extending-default-theme#layout-slots))

## ğŸ“˜ TypeScript

### ğŸ› ï¸ Options

```typescript
export interface PermalinkOption {
  /**
   * å¿½ç•¥çš„æ–‡ä»¶/æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼
   *
   * @default []
   */
  ignoreList?: Array<RegExp | string>;
  /**
   * æ–‡ç« æ‰€åœ¨çš„ç›®å½•ï¼ŒåŸºäº package.json æ‰€åœ¨ç›®å½•ï¼Œå¼€å¤´ä¸éœ€è¦æœ‰ /
   * @default 'vitepress çš„ srcDir é…ç½®é¡¹'
   */
  path?: string;
}
```


