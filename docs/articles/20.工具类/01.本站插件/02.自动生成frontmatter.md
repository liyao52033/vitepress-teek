---
date: 2025-03-18 00:03:50
title: è‡ªåŠ¨ç”Ÿæˆfrontmatter
permalink: /pages/3ab292
description: >-
  ä¸€ä¸ªç”¨äº VitePress çš„æ’ä»¶ï¼Œèƒ½è‡ªåŠ¨ä¸º Markdown æ–‡ä»¶ç”Ÿæˆæ ‡é¢˜å’Œæ—¥æœŸç­‰
  frontmatterï¼Œæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰æ‰©å±•å†…å®¹ã€‚é€šè¿‡ç®€å•å®‰è£…å’Œé…ç½®å³å¯ä½¿ç”¨ï¼Œå¹¶èƒ½ç»“åˆ vitepress-plugin-catalogue
  æ’ä»¶æ·»åŠ æ°¸ä¹…é“¾æ¥å’Œåˆ†ç±»æ ‡ç­¾ã€‚è¯¥æ’ä»¶ä»…åœ¨é¡¹ç›®å¯åŠ¨æ—¶ç”Ÿæ•ˆï¼Œæœ‰æ•ˆæå‡æ–‡æ¡£ç®¡ç†çš„è‡ªåŠ¨åŒ–å’Œè§„èŒƒåŒ–æ°´å¹³ã€‚
tags:
  - æ’ä»¶
categories:
  - å·¥å…·ç±»
author:
  name: liyao
  link: https://xiaoying.org.cn
---

# vitepress-plugin-setfrontmatter

## githubåœ°å€

::: navCard  2

```yaml
- name: vitepress-plugin-setfrontmatter
  desc: è¿™æ˜¯ä¸€ä¸ªé€‚ç”¨äºvitepressçš„ Vite æ’ä»¶ï¼Œvitepresså¯åŠ¨æ—¶ï¼Œæ’ä»¶ä¼šç»™æŒ‡å®šçš„ markdown è‡ªåŠ¨ç”Ÿæˆfrontmatterã€‚
  img: https://img.xiaoying.org.cn/img/202503231752583.png
  link: https://github.com/liyao52033/vitepress-plugin-setfrontmatter
  badge: vitepressæ’ä»¶
  badgeType: tip
```

:::

## âœ¨ ç‰¹æ€§

- âœ¨ è‡ªåŠ¨ä¸ºMarkdownæ–‡ä»¶æ·»åŠ ç¼ºå¤±çš„frontmatterå­—æ®µï¼ˆæ ‡é¢˜ã€æ—¥æœŸã€æ°¸ä¹…é“¾æ¥ç­‰ï¼‰
- ğŸ”„ æ”¯æŒè‡ªå®šä¹‰frontmatterè½¬æ¢å‡½æ•°
- ğŸ“ æ”¯æŒè‡ªåŠ¨ç”ŸæˆåŸºäºæ–‡ä»¶è·¯å¾„çš„åˆ†ç±»ä¿¡æ¯
- ğŸ—‘ï¸ æ”¯æŒåˆ é™¤æŒ‡å®šçš„frontmatterå­—æ®µ
- ğŸŒ å…¼å®¹VitePressçš„å›½é™…åŒ–é…ç½®

## å®‰è£…

å®‰è£… `vitepress-plugin-setfrontmatter` æ’ä»¶

::: code-group

```shell [npm]
npm install vitepress-plugin-setfrontmatter --save-dev
```

```shell [yarn]
yarn add vitepress-plugin-setfrontmatter -D
```

```shell [pnpm]
pnpm i vitepress-plugin-setfrontmatter -D
```

:::

## ä½¿ç”¨æ–¹æ³•

åœ¨VitePressé…ç½®æ–‡ä»¶ä¸­å¼•å…¥å¹¶ä½¿ç”¨æ’ä»¶

::: code-group
```ts [.vitepress/config.ts]
import { defineConfig } from 'vitepress'
import AutoFrontmatter from 'vitepress-plugin-setfrontmatter'

export default defineConfig({
  vite: {
    plugins: [
      AutoFrontmatter ({
        pattern: '**/*.md',
        globOptions: { ignore: [""] } //å¿½ç•¥çš„æ–‡ä»¶æˆ–ç›®å½•
        permalinkPrefix: 'pages', // æ°¸ä¹…é“¾æ¥å‰ç¼€ï¼Œå¦‚è®¾ç½®ä¸º"/pages/"ï¼Œç”Ÿæˆçš„permalinkä¸º"/pages/xxxx",ä¸è®¾ç½®åˆ™ä¸ä¼šç”Ÿæˆ
        categories: true // æ˜¯å¦å¯ç”¨è‡ªåŠ¨æ·»åŠ frontmatter.categoriesåŠŸèƒ½
      })
    ]
  }
})
```

```ts [typescript]
export interface AutoFrontmatterOption {
  /**
   * æ‰«æçš„æ–‡ä»¶è·¯å¾„è¡¨è¾¾å¼ï¼Œä¸º global è¡¨è¾¾å¼
   */
  // å¤„ç†æ‰€æœ‰Markdownæ–‡ä»¶ pattern: "**/*.md"
  // åªå¤„ç†docsç›®å½•ä¸‹çš„Markdownæ–‡ä»¶ pattern: 'docs/**/*.md'
  // å¤„ç†å¤šä¸ªç›®å½• pattern: ['docs/**/*.md', 'blog/**/*.md']
  pattern?: string | string[];
  /**
   * tinyglobby çš„é…ç½®é¡¹
   * æ’ä»¶é»˜è®¤å·²ç»å¿½ç•¥ node_modules å’Œ dist ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶
   */
  globOptions?: GlobOptions;
  /**
   * permalink å‰ç¼€ï¼Œè®¾ç½®ç”Ÿæˆçš„æ°¸ä¹…é“¾æ¥å‰ç¼€ã€‚å¦‚æœè®¾ç½®äº†æ­¤é€‰é¡¹ï¼Œæ’ä»¶ä¼šä¸ºæ¯ä¸ªMarkdownæ–‡ä»¶ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„æ°¸ä¹…é“¾æ¥ã€‚ä¾‹å¦‚è®¾ç½®ä¸º "/pages/"ï¼Œåˆ™ç”Ÿæˆçš„ permalink ä¸º "/pages/xxxx"ï¼Œä¸è®¾ç½®åˆ™ä¸ä¼šç”Ÿæˆ
   */
  permalinkPrefix?: string;
  /**
    * æ˜¯å¦å¯ç”¨è‡ªåŠ¨æ·»åŠ  frontmatter.categories åŠŸèƒ½ï¼Œé»˜è®¤ä¸º true   
  */
  categories?: boolean;
  /**
   * è¦ä» frontmatter ä¸­åˆ é™¤çš„é”®å
   * ä¸‹é¢é…ç½®çš„coverImgä¸ºfalseå¹¶ä¸”keyå­˜åœ¨ï¼Œåˆ™åˆ é™¤è¯¥ keyï¼Œé»˜è®¤ä¸º "coverImg"
   */
  key?: string;
  /**
   * æ˜¯å¦å¯ç”¨è‡ªåŠ¨æ·»åŠ  frontmatter.coverImg åŠŸèƒ½ï¼Œé»˜è®¤ä¸º false
   */
  coverImg?: boolean | undefined;
  /**
   * è½¬æ¢å¤„ç†å¥½çš„ frontmatterï¼Œè¯¥å‡½æ•°éœ€è¦è¿”å›ä¸€ä¸ªæ–°çš„ frontmatter æˆ–åªè¿”å› undefinedï¼Œå¦‚æœè¿”å› {}ï¼Œåˆ™æ¸…ç©º MD æ–‡ä»¶æœ¬èº«å­˜åœ¨çš„ frontmatter
   */
  transform?: (frontmatter: Record<string, any>, fileInfo: FileInfo) => Record<string, any> | void;
}

export interface FileInfo {
  /**
   * æ–‡ä»¶ç»å¯¹è·¯å¾„
   */
  filePath: string;
  /**
   * æ–‡ä»¶ç›¸å¯¹è·¯å¾„
   */
  relativePath: string;
}

```
:::

> è¯´æ˜ï¼šè¯¥æ’ä»¶ä»…é™é¡¹ç›®å¯åŠ¨æ—¶ç”Ÿæ•ˆã€‚
- æ’ä»¶é»˜è®¤å¿½ç•¥ frontmatter ä¸­ layout: home å’Œ ["node_modules", "dist"] ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œä¸”åªæ‰«æ Markdown æ–‡æ¡£ã€‚
- æ’ä»¶é»˜è®¤ç»™ Markdown æ–‡ä»¶ç”Ÿæˆ title å’Œ date ä¸¤ä¸ªå±æ€§ï¼Œå…¶ä¸­ title ä¸ºæ–‡ä»¶åï¼ˆæ”¯æŒå¸¦åºå·çš„æ–‡ä»¶åï¼Œå¦‚ 01.xx.mdï¼‰ï¼Œdate ä¸ºæ–‡ä»¶çš„åˆ›å»ºæ—¥æœŸï¼ŒpermalinkPrefixå’Œcategoriesé€‰é¡¹éƒ½æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæƒ³æ‹“å±• frontmatter çš„å†…å®¹ï¼Œåˆ™ä½¿ç”¨ `transform` å‡½æ•°ã€‚

## transformè¯¦ç»†è¯´æ˜

è‡ªå®šä¹‰è½¬æ¢frontmatterçš„å‡½æ•°ã€‚è¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šå½“å‰çš„frontmatterå¯¹è±¡å’Œæ–‡ä»¶ä¿¡æ¯å¯¹è±¡ã€‚

```ts
transform: (frontmatter) => {
  // æ·»åŠ è‡ªå®šä¹‰å­—æ®µ
  return {
    ...frontmatter,
    author: 'Your Name',
    tags: ['vitepress', 'plugin']
  }
}
```

å¦‚æœå‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°†ä½œä¸ºæ–°çš„frontmatterï¼›å¦‚æœè¿”å›`undefined`ï¼Œåˆ™ä½¿ç”¨åŸfrontmatterï¼›å¦‚æœè¿”å›ç©ºå¯¹è±¡`{}`ï¼Œåˆ™æ¸…ç©ºåŸæœ‰frontmatterï¼Œä¸‹é¢å±•ç¤ºäº†ä¸€ä¸ªä¾‹å­ï¼Œæ ¹æ®æ–‡ä»¶è·¯å¾„æ·»åŠ æ ‡ç­¾

```ts
import { defineConfig } from 'vitepress'
import AutoFrontmatter from 'vitepress-plugin-setfrontmatter'

export default defineConfig({
  vite: {
    plugins: [
      AutoFrontmatter ({
        pattern: '**/*.md',
        transform: (frontmatter, fileInfo) => {
          // æ ¹æ®æ–‡ä»¶è·¯å¾„æ·»åŠ æ ‡ç­¾
          const tags = []
          if (fileInfo.relativePath.includes('vue')) {
            tags.push('vue')
          }
          if (fileInfo.relativePath.includes('react')) {
            tags.push('react')
          }
          
          return {
            ...frontmatter,
            tags,
            lastUpdated: new Date().toISOString()
          }
        }
      })
    ]
  }
})
```

## é…ç½®é€‰é¡¹

| é€‰é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
| --- | --- | --- | --- |
| `pattern` | `string \| string[]` | - | æ‰«æçš„æ–‡ä»¶è·¯å¾„è¡¨è¾¾å¼ï¼Œä½¿ç”¨globè¯­æ³• |
| `globOptions` | `GlobOptions` | - | tinyglobbyçš„é…ç½®é¡¹ï¼Œæ’ä»¶é»˜è®¤å·²å¿½ç•¥node_moduleså’Œdistç›®å½• |
| `permalinkPrefix` | `string` | - | æ°¸ä¹…é“¾æ¥å‰ç¼€ï¼Œå¦‚è®¾ç½®ä¸º"/pages/"ï¼Œç”Ÿæˆçš„permalinkä¸º"/pages/xxxx"ï¼Œä¸è®¾ç½®åˆ™ä¸ä¼šç”Ÿæˆæ°¸ä¹…é“¾æ¥ |
| `categories` | `boolean` | `false` | æ˜¯å¦å¯ç”¨è‡ªåŠ¨æ·»åŠ frontmatter.categoriesåŠŸèƒ½ |
| `key` | `string` | `"coverImg"` | è¦ä»frontmatterä¸­åˆ é™¤çš„é”®åï¼ŒcoverImgé…ç½®ä¸ºfalseå¹¶ä¸”keyå­˜åœ¨äºfrontmatterç”Ÿæ•ˆ |
| `coverImg` | `boolean` | `false` | æ˜¯å¦å¯ç”¨è‡ªåŠ¨æ·»åŠ frontmatter.coverImgåŠŸèƒ½ |
| `transform` | `Function` | - | è‡ªå®šä¹‰è½¬æ¢frontmatterçš„å‡½æ•° |

## å·¥ä½œåŸç†

æ’ä»¶ä¼šåœ¨VitePressæ„å»ºè¿‡ç¨‹ä¸­æ‰«ææŒ‡å®šçš„Markdownæ–‡ä»¶ï¼Œå¹¶æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

1. è¯»å–æ–‡ä»¶å†…å®¹å¹¶è§£æç°æœ‰çš„frontmatter
2. å¦‚æœç¼ºå°‘æ ‡é¢˜ï¼Œåˆ™æ ¹æ®æ–‡ä»¶åè‡ªåŠ¨ç”Ÿæˆ
3. å¦‚æœç¼ºå°‘æ—¥æœŸï¼Œåˆ™ä½¿ç”¨æ–‡ä»¶åˆ›å»ºæ—¶é—´
4. å¦‚æœè®¾ç½®äº†permalinkPrefixï¼Œåˆ™ç”Ÿæˆå”¯ä¸€çš„æ°¸ä¹…é“¾æ¥
5. å¦‚æœå¯ç”¨äº†categoriesåŠŸèƒ½ï¼Œåˆ™æ ¹æ®æ–‡ä»¶è·¯å¾„ç”Ÿæˆåˆ†ç±»ä¿¡æ¯
6. å¦‚æœæä¾›äº†transformå‡½æ•°ï¼Œåˆ™ä½¿ç”¨è¯¥å‡½æ•°è¿›ä¸€æ­¥å¤„ç†frontmatter
7. å°†å¤„ç†åçš„frontmatterå†™å›æ–‡ä»¶